<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Allergenic Pollen Producing Vegetation</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
<link href="https://api.mapbox.com/mapbox-gl-js/v2.8.2/mapbox-gl.css" rel="stylesheet">
<script src="https://api.mapbox.com/mapbox-gl-js/v2.8.2/mapbox-gl.js"></script>
<style>
body { margin: 0; padding: 0; }
#map { position: absolute; top: 0; bottom: 0; width: 100%; }
</style>
</head>
<body>
<style>
#menu {
background: #fff;
position: absolute;
z-index: 1;
top: 10px;
right: 10px;
border-radius: 3px;
width: 120px;
border: 1px solid rgba(0, 0, 0, 0.4);
font-family: 'Open Sans', sans-serif;
}
 
#menu a {
font-size: 13px;
color: #404040;
display: block;
margin: 0;
padding: 0;
padding: 10px;
text-decoration: none;
border-bottom: 1px solid rgba(0, 0, 0, 0.25);
text-align: center;
}
 
#menu a:last-child {
border: none;
}
 
#menu a:hover {
background-color: #f8f8f8;
color: #404040;
}
 
#menu a.active {
background-color: #3887be;
color: #ffffff;
}
 
#menu a.active:hover {
background: #3074a4;
}
</style>

<nav id="menu"></nav>
<div id="map"></div>

<script>

mapboxgl.accessToken = 'pk.eyJ1IjoiZm90bGV5IiwiYSI6ImNrbHp1c3phdjFnMWcydXA4djlqMTh6emoifQ.3wA0_B9ImEpt4iDd2esJqg';

var bounds = [
    [144.20, -38.67],
    [146.21, -37.18]
];

var map = new mapboxgl.Map({
    container: 'map', // container ID
    style: 'mapbox://styles/fotley/cko0vhaap04i117nykvkb79n8', // style URL
    maxBounds: bounds,
    center: [145.257, -37.922], // starting position [lng, lat]
    zoom: 8.5 // starting zoom
});

map.on('load', function() {
  // Added a custom vector tileset source for each year of the Sands and McDougall Directory. This tileset contains Directory year (year of sands and mcD publication)
  // point features 
  map.addSource('SummerTree', {
    type: 'vector',
    url: 'mapbox://fotley.ama38xqv'
  });

  map.addLayer({
    'id': 'SummerTree',
    'type': 'circle',
    'source': 'SummerTree',
    'layout': {
      // Make the layer visible by default.
      'visibility': 'visible'
    },
    'paint': {
      "circle-color": "Red",
      //change the circle colour, outline width, colour, opacity
      //same format used for all layers added
      "circle-stroke-width": 0.5,
      "circle-stroke-color": "White",
      "circle-opacity": 0.70,
      "circle-radius": {
        "stops": [
          [7, 3.0],
          //varying circle size with zoom
          [22, 140]
        ],
        "base": 1.75,
      }
    },
    'minzoom': 8,
    //limiting visibility of layer with zoom
    'source-layer': 'SummerTree-6zwvxm'
  });

  map.addSource('SummerGrass', {
    type: 'vector',
    url: 'mapbox://fotley.707ntsfm'
  });
  map.addLayer({
    'id': 'SummerGrass',
    'type': 'circle',
    'source': 'SummerGrass',
    'layout': {
      // Make the layer visible by default.
      'visibility': 'visible'
    },
    'paint': {
      "circle-color": "Green",
      //change the circle colour, outline width, colour, opacity
      //same format used for all layers added
      "circle-stroke-width": 0.5,
      "circle-stroke-color": "White",
      "circle-opacity": 0.70,
      "circle-radius": {
        "stops": [
          [7, 3.0],
          //varying circle size with zoom
          [22, 140]
        ],
        "base": 1.75,
      }
    },
    'minzoom': 8,
    //limiting visibility of layer with zoom
    'source-layer': 'SummerGrass-7swkts'
  });
  
  map.addSource('SummerWeeds', {
    type: 'vector',
    url: 'mapbox://fotley.8nesgqpq'
  });
  map.addLayer({
    'id': 'SummerWeeds',
    'type': 'circle',
    'source': 'SummerWeeds',
    'layout': {
      // Make the layer visible by default.
      'visibility': 'visible'
    },
    'paint': {
      "circle-color": "Orange",
      //change the circle colour, outline width, colour, opacity
      //same format used for all layers added
      "circle-stroke-width": 0.5,
      "circle-stroke-color": "White",
      "circle-opacity": 0.70,
      "circle-radius": {
        "stops": [
          [7, 3.0],
          //varying circle size with zoom
          [22, 140]
        ],
        "base": 1.75,
      }
    },
    'minzoom': 8,
    //limiting visibility of layer with zoom
    'source-layer': 'SummerWeeds-6ov5k8'
  });

  map.addSource('AutumnTree', {
    type: 'vector',
    url: 'mapbox://fotley.ciitj6sq'
  });
  map.addLayer({
    'id': 'AutumnTree',
    'type': 'circle',
    'source': 'AutumnTree',
    'layout': {
      // Make the layer visible by default.
      'visibility': 'visible'
    },
    'paint': {
      "circle-color": "red",
      //change the circle colour, outline width, colour, opacity
      //same format used for all layers added
      "circle-stroke-width": 0.5,
      "circle-stroke-color": "White",
      "circle-opacity": 0.70,
      "circle-radius": {
        "stops": [
          [7, 3.0],
          //varying circle size with zoom
          [22, 140]
        ],
        "base": 1.75,
      }
    },
    'minzoom': 8,
    //limiting visibility of layer with zoom
    'source-layer': 'AutumnTree-28f98e'
  });
  map.addSource('AutumnGrass', {
    type: 'vector',
    url: 'mapbox://fotley.86bzl2te'
  });
  map.addLayer({
    'id': 'AutumnGrass',
    'type': 'circle',
    'source': 'AutumnGrass',
    'layout': {
      // Make the layer visible by default.
      'visibility': 'visible'
    },
    'paint': {
      "circle-color": "green",
      //change the circle colour, outline width, colour, opacity
      //same format used for all layers added
      "circle-stroke-width": 0.5,
      "circle-stroke-color": "White",
      "circle-opacity": 0.70,
      "circle-radius": {
        "stops": [
          [7, 3.0],
          //varying circle size with zoom
          [22, 140]
        ],
        "base": 1.75,
      }
    },
    'minzoom': 8,
    //limiting visibility of layer with zoom
    'source-layer': 'AutumnGrass-5354pm'
  });
  map.addSource('WinterTree', {
    type: 'vector',
    url: 'mapbox://fotley.1mttrck8'
  });
  map.addLayer({
    'id': 'WinterTree',
    'type': 'circle',
    'source': 'WinterTree',
    'layout': {
      // Make the layer visible by default.
      'visibility': 'visible'
    },
    'paint': {
      "circle-color": "red",
      //change the circle colour, outline width, colour, opacity
      //same format used for all layers added
      "circle-stroke-width": 0.5,
      "circle-stroke-color": "White",
      "circle-opacity": 0.70,
      "circle-radius": {
        "stops": [
          [7, 3.0],
          //varying circle size with zoom
          [22, 140]
        ],
        "base": 1.75,
      }
    },
    'minzoom': 8,
    //limiting visibility of layer with zoom
    'source-layer': 'WinterTree-9qm77d'
  });
  map.addSource('WinterGrass', {
    type: 'vector',
    url: 'mapbox://fotley.c2fxsnuy'
  });
  map.addLayer({
    'id': 'WinterGrass',
    'type': 'circle',
    'source': 'WinterGrass',
    'layout': {
      // Make the layer visible by default.
      'visibility': 'visible'
    },
    'paint': {
      "circle-color": "green",
      //change the circle colour, outline width, colour, opacity
      //same format used for all layers added
      "circle-stroke-width": 0.5,
      "circle-stroke-color": "White",
      "circle-opacity": 0.70,
      "circle-radius": {
        "stops": [
          [7, 3.0],
          //varying circle size with zoom
          [22, 140]
        ],
        "base": 1.75,
      }
    },
    'minzoom': 8,
    //limiting visibility of layer with zoom
    'source-layer': 'WinterGrass-6ebfib'
  });
  map.addSource('SpringTree', {
    type: 'vector',
    url: 'mapbox://fotley.3bym3fud'
  });
  map.addLayer({
    'id': 'SpringTree',
    'type': 'circle',
    'source': 'SpringTree',
    'layout': {
      // Make the layer visible by default.
      'visibility': 'visible'
    },
    'paint': {
      "circle-color": "red",
      //change the circle colour, outline width, colour, opacity
      //same format used for all layers added
      "circle-stroke-width": 0.5,
      "circle-stroke-color": "White",
      "circle-opacity": 0.70,
      "circle-radius": {
        "stops": [
          [7, 3.0],
          //varying circle size with zoom
          [22, 140]
        ],
        "base": 1.75,
      }
    },
    'minzoom': 8,
    //limiting visibility of layer with zoom
    'source-layer': 'SpringTree-d0ff76'
  });
  map.addSource('SpringGrass', {
    type: 'vector',
    url: 'mapbox://fotley.4q5z4v68'
  });
  map.addLayer({
    'id': 'SpringGrass',
    'type': 'circle',
    'source': 'SpringGrass',
    'layout': {
      // Make the layer visible by default.
      'visibility': 'visible'
    },
    'paint': {
      "circle-color": "green",
      //change the circle colour, outline width, colour, opacity
      //same format used for all layers added
      "circle-stroke-width": 0.5,
      "circle-stroke-color": "White",
      "circle-opacity": 0.70,
      "circle-radius": {
        "stops": [
          [7, 3.0],
          //varying circle size with zoom
          [22, 140]
        ],
        "base": 1.75,
      }
    },
    'minzoom': 8,
    //limiting visibility of layer with zoom
    'source-layer': 'SpringGrass-3w4ra6'
  });
  map.addSource('SpringWeeds1', {
    type: 'vector',
    url: 'mapbox://fotley.ai64ir3v'
  });
  map.addLayer({
    'id': 'SpringWeeds1',
    'type': 'circle',
    'source': 'SpringWeeds1',
    'layout': {
      // Make the layer visible by default.
      'visibility': 'visible'
    },
    'paint': {
      "circle-color": "Orange",
      //change the circle colour, outline width, colour, opacity
      //same format used for all layers added
      "circle-stroke-width": 0.5,
      "circle-stroke-color": "White",
      "circle-opacity": 0.70,
      "circle-radius": {
        "stops": [
          [7, 3.0],
          //varying circle size with zoom
          [22, 140]
        ],
        "base": 1.75,
      }
    },
    'minzoom': 8,
    //limiting visibility of layer with zoom
    'source-layer': 'SpringWeeds1-d58w7y'
  });
});
map.addControl(new mapboxgl.NavigationControl(), 'top-left');

map.on('mouseenter', 'SummerTree', function() {
  map.getCanvas().style.cursor = 'pointer';
});
map.on('click', 'SummerTree', function(e) {
  new mapboxgl.Popup()
    .setLngLat(e.lngLat)
    .setHTML(e.features[0].properties.scientificName + "<br>" + e.features[0].properties.year)
    .addTo(map);
});
map.on('mouseleave', 'SummerTree', function() {
  map.getCanvas().style.cursor = '';
});
map.on('mouseenter', 'SummerGrass', function() {
  map.getCanvas().style.cursor = 'pointer';
});
map.on('click', 'SummerGrass', function(e) {
  new mapboxgl.Popup()
    .setLngLat(e.lngLat)
    .setHTML(e.features[0].properties.scientificName + "<br>" + e.features[0].properties.year)
    .addTo(map);
});
map.on('mouseleave', 'SummerGrass', function() {
  map.getCanvas().style.cursor = '';
});
map.on('mouseenter', 'SummerWeeds', function() {
  map.getCanvas().style.cursor = 'pointer';
});
map.on('click', 'SummerWeeds', function(e) {
  new mapboxgl.Popup()
    .setLngLat(e.lngLat)
    .setHTML(e.features[0].properties.scientificName + "<br>" + e.features[0].properties.year)
    .addTo(map);
});
map.on('mouseleave', 'SummerWeeds', function() {
  map.getCanvas().style.cursor = '';
});
map.on('mouseenter', 'AutumnTree', function() {
  map.getCanvas().style.cursor = 'pointer';
});
map.on('click', 'AutumnTree', function(e) {
  new mapboxgl.Popup()
    .setLngLat(e.lngLat)
    .setHTML(e.features[0].properties.scientificName + "<br>" + e.features[0].properties.year)
    .addTo(map);
});
map.on('mouseleave', 'AutumnTree', function() {
  map.getCanvas().style.cursor = '';
});
map.on('mouseenter', 'AutumnGrass', function() {
  map.getCanvas().style.cursor = 'pointer';
});
map.on('click', 'AutumnGrass', function(e) {
  new mapboxgl.Popup()
    .setLngLat(e.lngLat)
    .setHTML(e.features[0].properties.scientificName + "<br>" + e.features[0].properties.year)
    .addTo(map);
});
map.on('mouseleave', 'AutumnGrass', function() {
  map.getCanvas().style.cursor = '';
});
map.on('mouseenter', 'WinterGrass', function() {
  map.getCanvas().style.cursor = 'pointer';
});
map.on('click', 'WinterGrass', function(e) {
  new mapboxgl.Popup()
    .setLngLat(e.lngLat)
    .setHTML(e.features[0].properties.scientificName + "<br>" + e.features[0].properties.year)
    .addTo(map);
});
map.on('mouseleave', 'WinterGrass', function() {
  map.getCanvas().style.cursor = '';
});
map.on('mouseenter', 'WinterTree', function() {
  map.getCanvas().style.cursor = 'pointer';
});
map.on('click', 'WinterTree', function(e) {
  new mapboxgl.Popup()
    .setLngLat(e.lngLat)
    .setHTML(e.features[0].properties.scientificName + "<br>" + e.features[0].properties.year)
    .addTo(map);
});
map.on('mouseleave', 'WinterTree', function() {
  map.getCanvas().style.cursor = '';
});
map.on('mouseenter', 'SpringTree', function() {
  map.getCanvas().style.cursor = 'pointer';
});
map.on('click', 'SpringTree', function(e) {
  new mapboxgl.Popup()
    .setLngLat(e.lngLat)
    .setHTML(e.features[0].properties.scientificName + "<br>" + e.features[0].properties.year)
    .addTo(map);
});
map.on('mouseleave', 'SpringTree', function() {
  map.getCanvas().style.cursor = '';
});
map.on('mouseenter', 'SpringGrass', function() {
  map.getCanvas().style.cursor = 'pointer';
});
map.on('click', 'SpringGrass', function(e) {
  new mapboxgl.Popup()
    .setLngLat(e.lngLat)
    .setHTML(e.features[0].properties.scientificName + "<br>" + e.features[0].properties.year)
    .addTo(map);
});
map.on('mouseleave', 'SpringGrass', function() {
  map.getCanvas().style.cursor = '';
});
map.on('mouseenter', 'SpringWeeds1', function() {
  map.getCanvas().style.cursor = 'pointer';
});
map.on('click', 'SpringWeeds1', function(e) {
  new mapboxgl.Popup()
    .setLngLat(e.lngLat)
    .setHTML(e.features[0].properties.scientificName + "<br>" + e.features[0].properties.year)
    .addTo(map);
});
map.on('mouseleave', 'SpringWeeds1', function() {
  map.getCanvas().style.cursor = '';
});

map.on('idle', () => {
// If these layers were not added to the map, abort
if (!map.getLayer('SummerTree') || !map.getLayer('SummerGrass') || !map.getLayer('SummerWeeds') || !map.getLayer('AutumnTree') || !map.getLayer('AutumnGrass') || !map.getLayer('WinterTree') || !map.getLayer('WinterGrass') || !map.getLayer('SpringTree') || !map.getLayer('SpringGrass') || !map.getLayer('SpringWeeds1')) {
return;
}
 
// Enumerate ids of the layers.
const toggleableLayerIds = ['SummerTree', 'SummerGrass', 'SummerWeeds', 'AutumnTree', 'AutumnGrass', 'WinterTree', 'WinterGrass', 'SpringTree', 'SpringGrass', 'SpringWeeds1'];
 
// Set up the corresponding toggle button for each layer.
for (const id of toggleableLayerIds) {
// Skip layers that already have a button set up.
if (document.getElementById(id)) {
continue;
}
 
// Create a link.
const link = document.createElement('a');
link.id = id;
link.href = '#';
link.textContent = id;
link.className = 'active';
 
// Show or hide layer when the toggle is clicked.
link.onclick = function (e) {
const clickedLayer = this.textContent;
e.preventDefault();
e.stopPropagation();
 
const visibility = map.getLayoutProperty(
clickedLayer,
'visibility'
);
 
// Toggle layer visibility by changing the layout object's visibility property.
if (visibility === 'visible') {
map.setLayoutProperty(clickedLayer, 'visibility', 'none');
this.className = '';
} else {
this.className = 'active';
map.setLayoutProperty(
clickedLayer,
'visibility',
'visible'
);
}
};
 
const layers = document.getElementById('menu');
layers.appendChild(link);
}
});
//

</script>
 
</body>
</html>

